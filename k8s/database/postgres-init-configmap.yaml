apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-init-scripts
  namespace: medisupply
data:
  init-db.sql: |
    -- Script de inicialización para PostgreSQL
    -- Crea las bases de datos necesarias para los microservicios
    -- NOTA: CREATE DATABASE no puede ejecutarse dentro de bloques DO $$,
    -- por lo que este script solo crea extensiones.
    -- Las bases de datos se crean mediante el db-init-job o manualmente.
    
    -- Este script se ejecuta cuando PostgreSQL inicializa por primera vez.
    -- Si las bases de datos ya existen, solo creamos las extensiones.
    -- Si no existen, el db-init-job las creará.
    
    -- NOTA: Las bases de datos deben crearse desde fuera de PostgreSQL
    -- usando psql con comandos directos o el job de inicialización.
